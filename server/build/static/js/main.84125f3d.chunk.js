(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{159:function(e,a,r){},167:function(e,a,r){"use strict";r.r(a);var n,t,c,i=r(0),d=r.n(i),s=r(25),o=r.n(s),l=(r(159),r(21)),j=r(214),O=r(215),b=r(103),u=r(225),h=(Object(u.a)(n||(n=Object(b.a)(["\n  query {\n    allVaccineOrders {\n      vaccine\n      arrived\n      injections\n    }\n  }\n"]))),Object(u.a)(t||(t=Object(b.a)(["\n  query vaccineOrdersArrivedByDate($date: String!) {\n    vaccineOrdersArrivedByDate(date: $date) {\n      vaccine\n      arrived\n      bottleExpires\n      isBottleExpiredOnDate(date: $date)\n      injections\n      vaccinationsDoneWithVaccine {\n        vaccinationDate\n      }\n    }\n  }\n"])))),v=(Object(u.a)(c||(c=Object(b.a)(["\n  query vaccineOrdersArrivedOnDate($date: String!) {\n    vaccineOrdersArrivedOnDate(date: $date) {\n      vaccine\n      arrived\n      bottleExpires\n      isBottleExpiredOnDate(date: $date)\n      injections\n      vaccinationsDoneWithVaccine {\n        vaccinationDate\n      }\n    }\n  }\n"]))),r(216)),x=r(217),p=r(205),g=r(105),f=r(199),y=r(137),D=r(27),E=r(202),m=r(230),S=r(203),A=r(227),B=r(11);function T(e){var a=e.selectedDate,r=e.handleDateChange,n=e.handleClick,t=e.handleCheckedChange,c=e.checked;return Object(B.jsx)(D.a,{utils:y.a,children:Object(B.jsxs)(f.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(B.jsx)(E.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",label:"Date",value:a,onChange:r,KeyboardButtonProps:{"aria-label":"change date"}}),Object(B.jsx)(m.a,{margin:"normal",ampm:!1,id:"time-picker",format:"HH:mm:ss",label:"Time",views:["hours","minutes","seconds"],value:a,onChange:r,KeyboardButtonProps:{"aria-label":"change time"},disabled:!c}),Object(B.jsx)(S.a,{color:"primary",variant:"contained",id:"search-button",style:{height:48,marginLeft:12},onClick:n,children:"Search"}),Object(B.jsx)(A.a,{checked:c,onChange:t}),Object(B.jsx)(g.a,{variant:"body2",children:"Include time?"})]})})}var I,V=r(228),N=r(206),w=r(207),C=function(e){var a=Date.parse(e),r=6e4*(new Date).getTimezoneOffset(),n=new Date(a-r),t=new Date;return!U(n)&&U(t)?Object(V.a)(n,{hours:1}).toISOString():U(n)&&!U(t)?Object(N.a)(n,{hours:1}).toISOString():n.toISOString()},k=function(e){return e.split("T")[0]},U=function(e){return!!function(e){return e.getTimezoneOffset()<function(e){var a=new Date(e.getFullYear(),0,1),r=new Date(e.getFullYear(),6,1);return Math.max(a.getTimezoneOffset(),r.getTimezoneOffset())}(e)}(e)},q=r(223),L=r(204),P=r(208),M=r(209),R=r(210),Z=r(211),$=r(212),W=r(213),z=r(77),F=r(14),H=r(73),J={ordersArrived:0,vaccinesArrived:0,vaccinationsUsed:0,producer:{SolarBuddhica:{orders:0,vaccines:0},Antiqua:{orders:0,vaccines:0},Zerpfy:{orders:0,vaccines:0}},bottlesExpiredOnDay:0,expiredVaccinesBeforeUsage:0,vaccinesLeftNotExpired:0,vaccinesExpiringNextTenDays:0};!function(e){e.INCREMENT="increment",e.INIT="init"}(I||(I={}));var Y=function(e,a){switch(a.type){case I.INCREMENT:var r,n;return Object(H.a)(Object(H.a)({},e),{},{ordersArrived:e.ordersArrived+1,vaccinesArrived:e.vaccinesArrived+a.payload.order.injections,vaccinationsUsed:e.vaccinationsUsed+a.payload.order.vaccinationsDoneWithVaccine.length,expiredVaccinesBeforeUsage:a.payload.order.isBottleExpiredOnDate?e.expiredVaccinesBeforeUsage+(a.payload.order.injections-a.payload.order.vaccinationsDoneWithVaccine.length):e.expiredVaccinesBeforeUsage+0,vaccinesLeftNotExpired:a.payload.order.isBottleExpiredOnDate?e.vaccinesLeftNotExpired:e.vaccinesLeftNotExpired+(a.payload.order.injections-a.payload.order.vaccinationsDoneWithVaccine.length),bottlesExpiredOnDay:a.payload.isBottleExpiredOnGivenDate?e.bottlesExpiredOnDay+1:e.bottlesExpiredOnDay,vaccinesExpiringNextTenDays:a.payload.isExpiringInTenDays?e.vaccinesExpiringNextTenDays+a.payload.order.injections:e.vaccinesExpiringNextTenDays,producer:Object(H.a)(Object(H.a)({},e.producer),{},Object(F.a)({},a.payload.currentProducer,Object(H.a)(Object(H.a)({},e.producer[a.payload.currentProducer]),{},{orders:(null===(r=e.producer[a.payload.currentProducer])||void 0===r?void 0:r.orders)+1,vaccines:(null===(n=e.producer[a.payload.currentProducer])||void 0===n?void 0:n.vaccines)+a.payload.order.injections})))});case I.INIT:return J;default:throw new Error("Unhandled action type ".concat(JSON.stringify(a)))}},G=function(e){var a=e.dataArrivedByDate,r=e.convertedDate,n=e.loadingOrders,t=e.initialLoading,c=Object(i.useReducer)(Y,J),d=Object(l.a)(c,2),s=d[0],o=d[1],j=function(e){if(!r)throw new Error("No given day");var a=Date.parse(C(Object(z.a)(Date.parse(r)).toISOString())),n=Date.parse(r);e.vaccineOrdersArrivedByDate.forEach((function(e){var r=Date.parse(e.bottleExpires),t=!1;r>a&&r<n&&(t=!0);var c=!1;(function(e,a){var r=0|Math.floor(Object(w.a)(a,e)/24);return r<=10&&r>=0})(n,r)&&(c=!0);var i=b(e.vaccine);o({type:I.INCREMENT,payload:{order:e,currentProducer:i,isBottleExpiredOnGivenDate:t,isExpiringInTenDays:c}})}))};Object(i.useEffect)((function(){a&&(O(),j(a))}),[a]);var O=function(){o({type:I.INIT})},b=function(e){switch(e.toString()){case"SOLAR_BUDDHICA":return"SolarBuddhica";case"ANTIQUA":return"Antiqua";case"ZERPFY":return"Zerpfy";default:throw new Error("invalid vaccine producer name")}};return t&&!a||n?Object(B.jsx)(q.a,{display:"flex",justifyContent:"center",style:{marginTop:50},children:Object(B.jsx)(L.a,{})}):Object(B.jsx)(P.a,{children:Object(B.jsxs)(M.a,{children:[Object(B.jsx)(R.a,{children:Object(B.jsx)(Z.a,{children:Object(B.jsx)($.a,{children:"Interesting data"})})}),Object(B.jsxs)(W.a,{children:[Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Orders Arrived Total"}),Object(B.jsx)($.a,{id:"orders-arrived-total",children:s.ordersArrived})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Vaccines Arrived Total"}),Object(B.jsx)($.a,{children:s.vaccinesArrived})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Vaccines used"}),Object(B.jsx)($.a,{children:s.vaccinationsUsed})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Bottles expired on given day"}),Object(B.jsx)($.a,{children:s.bottlesExpiredOnDay})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Vaccines expired before usage"}),Object(B.jsx)($.a,{id:"expired-before-usage",children:s.expiredVaccinesBeforeUsage})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Vaccines left to use"}),Object(B.jsx)($.a,{children:s.vaccinesLeftNotExpired})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Vaccines expiring in the next 10 days"}),Object(B.jsx)($.a,{children:s.vaccinesExpiringNextTenDays})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Orders / Vaccines per producer: SolarBuddhica"}),Object(B.jsxs)($.a,{children:[Object(B.jsx)("strong",{children:"Orders"})," ",s.producer.SolarBuddhica.orders," / ",Object(B.jsx)("strong",{children:"Vaccines"})," ",s.producer.SolarBuddhica.vaccines]})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Orders / Vaccines per producer: Antiqua"}),Object(B.jsxs)($.a,{children:[Object(B.jsx)("strong",{children:"Orders"})," ",s.producer.Antiqua.orders," / ",Object(B.jsx)("strong",{children:"Vaccines"})," ",s.producer.Antiqua.vaccines]})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Orders / Vaccines per producer: Zerpfy"}),Object(B.jsxs)($.a,{children:[Object(B.jsx)("strong",{children:"Orders"})," ",s.producer.Zerpfy.orders," / ",Object(B.jsx)("strong",{children:"Vaccines"})," ",s.producer.Zerpfy.vaccines]})]})]})]})})};var K=function(){var e=d.a.useState(new Date("2021-04-12T11:10:06")),a=Object(l.a)(e,2),r=a[0],n=a[1],t=d.a.useState(r&&C(r.toISOString())||null),c=Object(l.a)(t,2),i=c[0],s=c[1],o=d.a.useState(!0),b=Object(l.a)(o,2),u=b[0],f=b[1],y=d.a.useState(!1),D=Object(l.a)(y,2),E=D[0],m=D[1],S=Object(j.a)(h,{variables:{date:i}}),A=S.loading,I=S.data,V=Object(O.a)(h,{variables:{date:u?i:i&&k(i)||null}}),N=Object(l.a)(V,2),w=N[0],U=N[1],q=U.loading,L=U.data;return Object(B.jsxs)(v.a,{children:[Object(B.jsx)(x.a,{position:"fixed",children:Object(B.jsx)(p.a,{color:"inherit",children:Object(B.jsx)(g.a,{children:"Vaccine data"})})}),Object(B.jsx)(g.a,{variant:"h2",style:{marginTop:"64px"},align:"center",children:"Search vaccine data"}),Object(B.jsx)(T,{selectedDate:r,handleDateChange:function(e){if(!e)return null;if(Date.parse(e.toString())){var a=C(e.toISOString());s(a),n(e)}},handleClick:function(){if(m(!0),!1!==u)w({variables:{date:i||null}});else{var e=i&&k(i);w({variables:{date:e||null}})}},handleCheckedChange:function(e){f(e.target.checked)},checked:u}),E&&Object(B.jsx)(G,{dataArrivedByDate:L,convertedDate:i,loadingOrders:q,initialLoading:A,initialData:I})]})},Q=r(222),_=r(224),X=r(221),ee=new Q.a({uri:"/graphql",cache:new _.a});o.a.render(Object(B.jsx)(X.a,{client:ee,children:Object(B.jsx)(K,{})}),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.84125f3d.chunk.js.map