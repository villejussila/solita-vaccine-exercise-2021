(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{159:function(e,a,n){},167:function(e,a,n){"use strict";n.r(a);var r,c,t,i=n(0),d=n.n(i),s=n(25),o=n.n(s),l=(n(159),n(21)),j=n(214),O=n(215),b=n(103),u=n(225),h=(Object(u.a)(r||(r=Object(b.a)(["\n  query {\n    allVaccineOrders {\n      vaccine\n      arrived\n      injections\n    }\n  }\n"]))),Object(u.a)(c||(c=Object(b.a)(["\n  query vaccineOrdersArrivedByDate($date: String!) {\n    vaccineOrdersArrivedByDate(date: $date) {\n      vaccine\n      arrived\n      bottleExpires\n      isBottleExpiredOnDate(date: $date)\n      injections\n      vaccinationsDoneWithVaccine {\n        vaccinationDate\n      }\n    }\n  }\n"])))),v=(Object(u.a)(t||(t=Object(b.a)(["\n  query vaccineOrdersArrivedOnDate($date: String!) {\n    vaccineOrdersArrivedOnDate(date: $date) {\n      vaccine\n      arrived\n      bottleExpires\n      isBottleExpiredOnDate(date: $date)\n      injections\n      vaccinationsDoneWithVaccine {\n        vaccinationDate\n      }\n    }\n  }\n"]))),n(216)),x=n(217),p=n(205),g=n(105),y=n(199),f=n(137),D=n(27),E=n(202),m=n(230),S=n(203),A=n(227),B=n(11);function T(e){var a=e.selectedDate,n=e.handleDateChange,r=e.handleClick,c=e.handleCheckedChange,t=e.checked;return Object(B.jsx)(D.a,{utils:f.a,children:Object(B.jsxs)(y.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(B.jsx)(E.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",label:"Date",value:a,onChange:n,KeyboardButtonProps:{"aria-label":"change date"}}),Object(B.jsx)(m.a,{margin:"normal",ampm:!1,id:"time-picker",format:"HH:mm:ss",label:"Time",views:["hours","minutes","seconds"],value:a,onChange:n,KeyboardButtonProps:{"aria-label":"change time"},disabled:!t}),Object(B.jsx)(S.a,{color:"primary",variant:"contained",style:{height:48,marginLeft:12},onClick:r,children:"Search"}),Object(B.jsx)(A.a,{checked:t,onChange:c}),Object(B.jsx)(g.a,{variant:"body2",children:"Include time?"})]})})}var I,V=n(228),N=n(206),w=n(207),C=function(e){var a=Date.parse(e),n=6e4*(new Date).getTimezoneOffset(),r=new Date(a-n),c=new Date;return!U(r)&&U(c)?Object(V.a)(r,{hours:1}).toISOString():U(r)&&!U(c)?Object(N.a)(r,{hours:1}).toISOString():r.toISOString()},k=function(e){return e.split("T")[0]},U=function(e){return!!function(e){return e.getTimezoneOffset()<function(e){var a=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1);return Math.max(a.getTimezoneOffset(),n.getTimezoneOffset())}(e)}(e)},q=n(223),L=n(204),P=n(208),M=n(209),R=n(210),Z=n(211),$=n(212),W=n(213),z=n(77),F=n(14),H=n(73),J={ordersArrived:0,vaccinesArrived:0,vaccinationsUsed:0,producer:{SolarBuddhica:{orders:0,vaccines:0},Antiqua:{orders:0,vaccines:0},Zerpfy:{orders:0,vaccines:0}},bottlesExpiredOnDay:0,expiredVaccinesBeforeUsage:0,vaccinesLeftNotExpired:0,vaccinesExpiringNextTenDays:0};!function(e){e.INCREMENT="increment",e.INIT="init"}(I||(I={}));var Y=function(e,a){switch(a.type){case I.INCREMENT:var n,r;return Object(H.a)(Object(H.a)({},e),{},{ordersArrived:e.ordersArrived+1,vaccinesArrived:e.vaccinesArrived+a.payload.order.injections,vaccinationsUsed:e.vaccinationsUsed+a.payload.order.vaccinationsDoneWithVaccine.length,expiredVaccinesBeforeUsage:a.payload.order.isBottleExpiredOnDate?e.expiredVaccinesBeforeUsage+(a.payload.order.injections-a.payload.order.vaccinationsDoneWithVaccine.length):e.expiredVaccinesBeforeUsage+0,vaccinesLeftNotExpired:a.payload.order.isBottleExpiredOnDate?e.vaccinesLeftNotExpired:e.vaccinesLeftNotExpired+(a.payload.order.injections-a.payload.order.vaccinationsDoneWithVaccine.length),bottlesExpiredOnDay:a.payload.isBottleExpiredOnGivenDate?e.bottlesExpiredOnDay+1:e.bottlesExpiredOnDay,vaccinesExpiringNextTenDays:a.payload.isExpiringInTenDays?e.vaccinesExpiringNextTenDays+a.payload.order.injections:e.vaccinesExpiringNextTenDays,producer:Object(H.a)(Object(H.a)({},e.producer),{},Object(F.a)({},a.payload.currentProducer,Object(H.a)(Object(H.a)({},e.producer[a.payload.currentProducer]),{},{orders:(null===(n=e.producer[a.payload.currentProducer])||void 0===n?void 0:n.orders)+1,vaccines:(null===(r=e.producer[a.payload.currentProducer])||void 0===r?void 0:r.vaccines)+a.payload.order.injections})))});case I.INIT:return J;default:throw new Error("Unhandled action type ".concat(JSON.stringify(a)))}},G=function(e){var a=e.dataArrivedByDate,n=e.convertedDate,r=e.loadingOrders,c=e.initialLoading,t=Object(i.useReducer)(Y,J),d=Object(l.a)(t,2),s=d[0],o=d[1],j=function(e){if(!n)throw new Error("No given day");var a=Date.parse(C(Object(z.a)(Date.parse(n)).toISOString()));e.vaccineOrdersArrivedByDate.forEach((function(e){var r=Date.parse(n),c=Date.parse(e.bottleExpires),t=!1;c>a&&c<r&&(t=!0);var i=!1;(function(e,a){var n=0|Math.floor(Object(w.a)(a,e)/24);return n<=10&&n>=0})(r,c)&&(i=!0);var d=b(e.vaccine);o({type:I.INCREMENT,payload:{order:e,currentProducer:d,isBottleExpiredOnGivenDate:t,isExpiringInTenDays:i}})}))};Object(i.useEffect)((function(){a&&(O(),j(a))}),[a]);var O=function(){o({type:I.INIT})},b=function(e){switch(e.toString()){case"SOLAR_BUDDHICA":return"SolarBuddhica";case"ANTIQUA":return"Antiqua";case"ZERPFY":return"Zerpfy";default:throw new Error("invalid vaccine producer name")}};return c&&!a||r?Object(B.jsx)(q.a,{display:"flex",justifyContent:"center",style:{marginTop:50},children:Object(B.jsx)(L.a,{})}):Object(B.jsx)(P.a,{children:Object(B.jsxs)(M.a,{children:[Object(B.jsx)(R.a,{children:Object(B.jsx)(Z.a,{children:Object(B.jsx)($.a,{children:"Interesting data"})})}),Object(B.jsxs)(W.a,{children:[Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Orders Arrived Total"}),Object(B.jsx)($.a,{children:s.ordersArrived})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Vaccines Arrived Total"}),Object(B.jsx)($.a,{children:s.vaccinesArrived})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Vaccines used"}),Object(B.jsx)($.a,{children:s.vaccinationsUsed})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Bottles expired on given day"}),Object(B.jsx)($.a,{children:s.bottlesExpiredOnDay})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Vaccines expired before usage"}),Object(B.jsx)($.a,{children:s.expiredVaccinesBeforeUsage})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Vaccines left to use"}),Object(B.jsx)($.a,{children:s.vaccinesLeftNotExpired})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Vaccines expiring in the next 10 days"}),Object(B.jsx)($.a,{children:s.vaccinesExpiringNextTenDays})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Orders / Vaccines per producer: SolarBuddhica"}),Object(B.jsxs)($.a,{children:[Object(B.jsx)("strong",{children:"Orders"})," ",s.producer.SolarBuddhica.orders," / ",Object(B.jsx)("strong",{children:"Vaccines"})," ",s.producer.SolarBuddhica.vaccines]})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Orders / Vaccines per producer: Antiqua"}),Object(B.jsxs)($.a,{children:[Object(B.jsx)("strong",{children:"Orders"})," ",s.producer.Antiqua.orders," / ",Object(B.jsx)("strong",{children:"Vaccines"})," ",s.producer.Antiqua.vaccines]})]}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)($.a,{children:"Orders / Vaccines per producer: Zerpfy"}),Object(B.jsxs)($.a,{children:[Object(B.jsx)("strong",{children:"Orders"})," ",s.producer.Zerpfy.orders," / ",Object(B.jsx)("strong",{children:"Vaccines"})," ",s.producer.Zerpfy.vaccines]})]})]})]})})};var K=function(){var e=d.a.useState(new Date("2021-04-12T11:10:06")),a=Object(l.a)(e,2),n=a[0],r=a[1],c=d.a.useState(n&&C(n.toISOString())||null),t=Object(l.a)(c,2),i=t[0],s=t[1],o=d.a.useState(!0),b=Object(l.a)(o,2),u=b[0],y=b[1],f=d.a.useState(!1),D=Object(l.a)(f,2),E=D[0],m=D[1],S=Object(j.a)(h,{variables:{date:i}}),A=S.loading,I=S.data,V=Object(O.a)(h,{variables:{date:u?i:i&&k(i)||null}}),N=Object(l.a)(V,2),w=N[0],U=N[1],q=U.loading,L=U.data;return Object(B.jsxs)(v.a,{children:[Object(B.jsx)(x.a,{position:"fixed",children:Object(B.jsx)(p.a,{color:"inherit",children:Object(B.jsx)(g.a,{children:"Vaccine data"})})}),Object(B.jsx)(g.a,{variant:"h2",style:{marginTop:"64px"},align:"center",children:"Search vaccine data"}),Object(B.jsx)(T,{selectedDate:n,handleDateChange:function(e){if(!e)return null;var a=C(e.toISOString());s(a),r(e)},handleClick:function(){if(m(!0),!1!==u)w({variables:{date:i||null}});else{var e=i&&k(i);w({variables:{date:e||null}})}},handleCheckedChange:function(e){y(e.target.checked)},checked:u}),E&&Object(B.jsx)(G,{dataArrivedByDate:L,convertedDate:i,loadingOrders:q,initialLoading:A,initialData:I})]})},Q=n(222),_=n(224),X=n(221),ee=new Q.a({uri:"/graphql",cache:new _.a});o.a.render(Object(B.jsx)(X.a,{client:ee,children:Object(B.jsx)(K,{})}),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.0ba211ec.chunk.js.map